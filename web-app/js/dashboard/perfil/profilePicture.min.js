
var allowedSize=$.allowedSize;var allowedContentTypes=$.allowedContentTypes;$.noConflict();jQuery(document).ready(function(b){b(".image-editor").cropit();b("#changePicture-btn").on("click",function(h){h.preventDefault();b('p[class*="help-block"]').each(function(){b(this).remove()});var k=0;var j;var f;if(!d()){k++;errorProfileMessage(b("#profileFile"),"El campo es obligatorio")}else{if(!a(allowedContentTypes)){k++;errorProfileMessage(b("#profileFile"),"El tipo del archivo es inválido")}else{f=getType();j=b(".image-editor").cropit("export",{type:f,quality:0.9,originalSize:true,fillBg:"#fff"});if(!c(allowedSize,j)){k++;errorProfileMessage(b("#profileFile"),"El tamaño de la imagen excede al total permitido: "+(allowedSize/1024/1024)+" MB")}}}if(k===0){b(".hidden-image-data").val(j);setName();b("#typeFile").val(f);var g=b("#updateProfilePicture-form");var e=new FormData(b(g)[0]);var i=b(g).attr("action");b.ajax({url:i,type:"POST",data:e,cache:false,contentType:false,processData:false,success:function(l){if(l.error){sweetAlert("Oops...",l.message,"error")}else{b("#profilePicture").attr("src",j);b("#bannerProfilePicture").attr("src",j);b("#deleteProfilePicture-btn").css("display","block");resetProfilePictureForm()}},error:function(l,n,m){sweetAlert("Oops...","Algo salió mal, intenta nuevamente en unos minutos.","error")}})}});var d=function(){var g=false;var e=b("#profileFile")[0].files;var f=e.length;if(f>0){g=true}return g};var a=function(g){var e=new Array();e=g.split(",");var h=false;var f=b("#profileFile").val();if(f!==""){var i=b("#profileFile")[0].files[0].type;if(i!==""){if(b.inArray(i,e)!==-1){h=true}}}return h};var c=function(e,g){e=Number(e);var f=Math.ceil(g.length*3/4);return(f<e)}});function setName(){var a=$("#profileFile").val();if(a!==""){var b=$("#profileFile")[0].files[0].name;if(b!==""){$("#nameFile").val(b)}}}function getType(){var a=$("#profileFile")[0].files[0].type;return a}function resetProfilePictureForm(){$('p[class*="help-block"]').each(function(){$(this).remove()});$("#updateProfilePicture-form")[0].reset();$(".cropit-preview-image").attr("src","");$("input[type=range]").val(0);cerrarModal("updateProfilePicture")}function deleteProfilePicture(){swal({title:"¡Importante!",text:"¿Está seguro que desea eliminar su foto de perfil?",type:"warning",showCancelButton:true,cancelButtonText:"Me equivoque en la selección",confirmButtonColor:"#DD6B55",confirmButtonText:"Sí, continuar",closeOnConfirm:false},function(a){if(a){$.ajax({type:"POST",dataType:"json",url:$.deleteProfilePicture,success:function(b){if(b.error){sweetAlert("Oops...",b.mensaje,"error")}else{$("#bannerProfilePicture").attr("src","/images/profile.png");$("#profilePicture").attr("src","/images/profile.png");$("#deleteProfilePicture-btn").css("display","none");sweetAlert({html:false,title:"¡Excelente!",text:"Su foto de perfil se ha eliminado correctamente.",type:"success"})}},error:function(b,d,c){sweetAlert("Oops...","Algo salió mal, intenta nuevamente en unos minutos.","error")}})}})};